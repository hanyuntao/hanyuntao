<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="hexo," />








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.1" />






<meta name="description" content="自从下决心自学前端开发开始，每天要看很多资料，之前记录学的东西记录在简书上，慢慢地不满足与使用现成的东西，憧憬在茫茫的互联网中有自己的独立空间。  不是为了给别人看，而是为了 记录自己的成长，记录自己的每一个脚印。">
<meta name="keywords" content="hexo">
<meta property="og:type" content="article">
<meta property="og:title" content="利用gitpage+hexo快速搭建自己的博客">
<meta property="og:url" content="http://www.hanyuntao.site/2017/05/20/利用github-hexo快速搭建自己的博客/index.html">
<meta property="og:site_name" content="前端之路">
<meta property="og:description" content="自从下决心自学前端开发开始，每天要看很多资料，之前记录学的东西记录在简书上，慢慢地不满足与使用现成的东西，憧憬在茫茫的互联网中有自己的独立空间。  不是为了给别人看，而是为了 记录自己的成长，记录自己的每一个脚印。">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/141625422.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/161354508.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162036325.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/172803248.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162506981.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162657619.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162738362.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/163145226.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/163200794.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164046607.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164207648.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164223707.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164304048.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164342796.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164448351.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164650186.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165045864.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165522767.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165543167.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165657431.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165948881.png?imageslim">
<meta property="og:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/170118487.png?imageslim">
<meta property="og:updated_time" content="2017-05-21T04:07:47.838Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="利用gitpage+hexo快速搭建自己的博客">
<meta name="twitter:description" content="自从下决心自学前端开发开始，每天要看很多资料，之前记录学的东西记录在简书上，慢慢地不满足与使用现成的东西，憧憬在茫茫的互联网中有自己的独立空间。  不是为了给别人看，而是为了 记录自己的成长，记录自己的每一个脚印。">
<meta name="twitter:image" content="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/141625422.png?imageslim">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.hanyuntao.site/2017/05/20/利用github-hexo快速搭建自己的博客/"/>





  <title>利用gitpage+hexo快速搭建自己的博客 | 前端之路</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  












  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1261989088&web_id=1261989088" language="JavaScript"></script>
  </div>






  
  
    
  


  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband">

      <a href="https://github.com/hanyuntao" style="z-index: 100;"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6625ac1f3ee0a12250227cf83ce904423abf351/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png"></a>
    </div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">前端之路</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">stay hungry stay foolish</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-essay">
          <a href="/essay" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-pencil"></i> <br />
            
            随笔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-demo">
          <a href="/demo_menu" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-fire"></i> <br />
            
            demo
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.hanyuntao.site/2017/05/20/利用github-hexo快速搭建自己的博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hanyuntao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oq6k3jdcg.bkt.clouddn.com/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="前端之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">利用gitpage+hexo快速搭建自己的博客</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-20T12:23:49+08:00">
                2017-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2017/05/20/利用github-hexo快速搭建自己的博客/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/05/20/利用github-hexo快速搭建自己的博客/" class="leancloud_visitors" data-flag-title="利用gitpage+hexo快速搭建自己的博客">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  7,664
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  30
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/141625422.png?imageslim" alt="mark"></p>
<p>自从下决心自学前端开发开始，每天要看很多资料，之前记录学的东西记录在简书上，慢慢地不满足与使用现成的东西，憧憬在茫茫的互联网中有自己的独立空间。</p>
<blockquote>
<p>不是为了给别人看，而是为了 记录自己的成长，记录自己的每一个脚印。</p>
</blockquote>
<a id="more"></a>
<p>本文是我自己摸索两天，踩过很多坑以后完成的，文章内容综合了很多牛人的技术贴而成，从最最基本的github账号创建到博客各项炫酷功能的完善。由于引用的内容比较杂乱，有多东西都是拼凑而成，侵删。文章主要引用资料都在文章末尾，再次对这些人表示感谢。</p>
<h2 id="Gitpage-hexo"><a href="#Gitpage-hexo" class="headerlink" title="Gitpage+hexo"></a>Gitpage+hexo</h2><p>想要实现拥有一个独立的私有博客，我们需要两个东西，一个是可供浏览器访问的静态网页存储空间，这个我们选择gitPage，一个是一个静态网页生成工具，Octopress也好，Hexo也罢，这里我选择的是Hexo。</p>
<h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><h2 id="安装Node"><a href="#安装Node" class="headerlink" title="安装Node"></a>安装Node</h2><p>到Node.js官网下载相应平台的最新版本，一路安装即可。</p>
<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><p>安装git，或安装github客户端，感觉github客户端很好用，界面很友好，同样操作起来也比git好用的多！</p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p>使用git shell,依次输入以下代码命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /</div><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure></p>
<p>命令解释：</p>
<p>cd和/之间要有空格，这条指令的作用是返回根目录，也可以在<code>cd /</code>后加入一个文件名，例如下文要用到的<code>cd /Hexo</code> 就可以指向这个文件夹，再输入代码行就默认在在此文件下执行。</p>
<h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><p>GitHub账号和GitHub Pages 一般都应该有吧，已有的请自动无视这一部分。</p>
<ul>
<li>首先注册一个『GitHub』帐号，已有的默认请忽略</li>
<li>建立与你用户名对应的仓库，仓库名必须为『your_user_name.github.com』</li>
<li>添加SSH公钥到『Account settings -&gt; SSH Keys -&gt; Add SSH Key』</li>
</ul>
<p>前两步忽略，只说第三步，添加SSH-Key。<br>首先设置你的用户名密码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config --global user.email &quot;bu.ru@qq.com&quot;</div><div class="line">git config --global user.name &quot;bruce-sha&quot;</div></pre></td></tr></table></figure></p>
<p>生成密钥：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C &quot;Github的注册邮箱地址&quot;</div></pre></td></tr></table></figure></p>
<p>一路Enter过来就好，待秘钥生成完毕，会得到两个文件id_rsa和id_rsa.pub，用带格式的记事本打开id_rsa.pub，Ctrl + a复制里面的所有内容，然后进入<a href="https://github.com/settings/ssh：" target="_blank" rel="external">https://github.com/settings/ssh：</a></p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/161354508.png?imageslim" alt="mark"></p>
<p>将复制的内容粘贴到Key的输入框，随便写好Title里面的内容，点击Add SSH key按钮即可。</p>
<h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><h2 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h2><p>安装<code>Hexo</code>完成后，请执行下列命令，<code>Hexo</code>将会在指定文件夹中新建所需要的文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cd /your path</div><div class="line">hexo init &lt;folder&gt;</div><div class="line">cd &lt;folder&gt;</div><div class="line">npm install</div><div class="line">hexo generate（可简写为hexo g）</div><div class="line">hexo sever（可简写为hexo s）</div></pre></td></tr></table></figure></p>
<p>命令解释:</p>
<ul>
<li>比如我要在<code>D</code>盘<code>test</code>文件夹下建我的博客，博客项目文件夹名称为<code>blog</code>,则执行<code>cd d:/test</code>。</li>
<li><code>init blog</code>,即在<code>test</code>下面创建<code>blog</code>文件夹。</li>
<li>指向blog目录</li>
<li>安装依赖文件</li>
<li>编译</li>
<li>开启本地服务(第5、6步的操作可以合并成hexo s -g)</li>
</ul>
<p>此时打开浏览器，在地址栏输入<a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a><br>即可查看博客的原型，是不是看到了胜利的曙光；但是如果“显示无法访问此网站”也不要沮丧，我这步是直接看到页面的，你无法访问的原因可能你没有翻墙，因为页面中默认使用了<code>ajax.google.com</code>下的js包。</p>
<p>新建完成后，指定文件夹的目录如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── _config.yml</div><div class="line">├── package.json</div><div class="line">├── scaffolds</div><div class="line">├── source</div><div class="line">|   ├── _drafts</div><div class="line">|   └── _posts</div><div class="line">└── themes</div></pre></td></tr></table></figure></p>
<h2 id="部署博客到服务器"><a href="#部署博客到服务器" class="headerlink" title="部署博客到服务器"></a>部署博客到服务器</h2><p>也就是把博客部署到github page提供的服务器上。<br>步骤：</p>
<ul>
<li>首先回到git shell按ctrl+c，之后输入y即可</li>
<li>修改blog文件夹下_config.yml文件，如下图所示修改，repository后的地址要改成你自己的地址：deploy: type: github repo: <a href="https://github.com/yourname/blog.git" target="_blank" rel="external">https://github.com/yourname/blog.git</a></li>
<li>继续回到git shell输入命令：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hexo clean</div><div class="line">hexo g</div><div class="line">hexo s</div><div class="line">hexo d</div></pre></td></tr></table></figure>
</li>
</ul>
<p>命令解释</p>
<pre><code>- 清除`public`，当 `source` 文件夹中的部分资源更改过之后，特别是对文件进行了删除或者路径的改变之后，需要执行这个命令，然后重新编译。
- 编译，一般部署上去的时候都需要编译一下，编译后，会出现一个 `public` 文件夹，将所有的`md`文件编译成`html`文件
- 部署博客到github上，如果一切顺利，你就通过访问`usename.github.io`访问你的博客了！
</code></pre><h1 id="发表博文"><a href="#发表博文" class="headerlink" title="发表博文"></a>发表博文</h1><h2 id="新建博文"><a href="#新建博文" class="headerlink" title="新建博文"></a>新建博文</h2><p>继续回到<code>git shell</code>输入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new “新博文的名字”</div></pre></td></tr></table></figure></p>
<p>即可在 <code>blog\source_posts</code> 目录中找到<code>新博文的名字.md</code>这个文件。你就可以使用maekdown编辑器打开进行编写博客内容了。<code>window</code>编辑器推荐<code>haroopad</code>，支持全平台，免费且强大。</p>
<h3 id="文章模板"><a href="#文章模板" class="headerlink" title="文章模板"></a>文章模板</h3><p>可能会遇到的问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new [layout] “postName” #新建文章</div></pre></td></tr></table></figure></p>
<p>其中layout是可选参数，默认值为post。有哪些layout呢，请到scaffolds目录下查看，这些文件名称就是layout名称。当然你可以添加自己的layout，方法就是添加一个文件即可，同时你也可以编辑现有的layout，比如post的layout默认是hexo\scaffolds\post.md<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">title: &#123; &#123; title &#125; &#125;</div><div class="line">date: &#123; &#123; date &#125; &#125;</div><div class="line">tags:</div><div class="line">---</div></pre></td></tr></table></figure></p>
<p>我想添加<code>categories</code>，以免每次手工输入，只需要修改这个文件添加一行</p>
<p><code>postName</code>是<code>md</code>文件的名字，同时也出现在你文章的<code>URL</code>中，<code>postName</code>如果包含空格，必须用”将其包围，<code>postName</code>可以为中文。</p>
<p>注意，所有文件：后面都必须有个空格，不然会报错。</p>
<h3 id="图片的fancybox效果"><a href="#图片的fancybox效果" class="headerlink" title="图片的fancybox效果"></a>图片的fancybox效果</h3><p>很简单，只需要在你的文章*.md文件的头上添加photos项即可，然后一行行添加你要展示的照片：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">layout: photo #可省略</div><div class="line">title: 我的阅历</div><div class="line">date: 2085-01-16 07:33:44</div><div class="line">tags: [hexo]</div><div class="line">photos:</div><div class="line">- http://bruce.u.qiniudn.com/2013/11/27/reading/photos-0.jpg</div><div class="line">- http://bruce.u.qiniudn.com/2013/11/27/reading/photos-1.jpg</div></pre></td></tr></table></figure></p>
<p>不想每次都手动添加怎么办？同样的，打开您的hexo\scaffolds\photo.md<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">layout: &#123; &#123; layout &#125; &#125;</div><div class="line">title: &#123; &#123; title &#125; &#125;</div><div class="line">date: &#123; &#123; date &#125; &#125;</div><div class="line">tags:</div><div class="line">photos:</div><div class="line">-</div><div class="line">---</div></pre></td></tr></table></figure></p>
<p>然后每次可以执行带layout的new命令生成照片文章：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new photo &quot;photoPostName&quot; #新建照片文章</div></pre></td></tr></table></figure></p>
<h3 id="description"><a href="#description" class="headerlink" title="description"></a>description</h3><p><code>markdown</code>文件头中也可以添加<code>description</code>，以覆盖全局配置文件中的<code>description</code>内容，请参考下文<code>_config.yml</code>的介绍。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">title: hexo你的博客</div><div class="line">date: 2013-11-22 17:11:54</div><div class="line">categories: default</div><div class="line">tags: [hexo]</div><div class="line">description: 你对本页的描述</div><div class="line">---</div></pre></td></tr></table></figure></p>
<p><code>hexo</code>默认会处理全部<code>markdown</code>和<code>html</code>文件，如果不想让<code>hexo</code>处理你的文件，可以在文件头中加入<code>layout: false</code>。</p>
<h3 id="文章摘要"><a href="#文章摘要" class="headerlink" title="文章摘要"></a>文章摘要</h3><p>在需要显示摘要的地方添加如下代码即可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">以上是摘要</div><div class="line">&lt;!--more--&gt;</div><div class="line">以下是余下全文</div></pre></td></tr></table></figure></p>
<p><code>more</code>以上内容即是文章摘要，在主页显示，<code>more</code>以下内容点击『&gt; Read More』链接打开全文才显示。</p>
<h2 id="优雅的在博客上插入图片"><a href="#优雅的在博客上插入图片" class="headerlink" title="优雅的在博客上插入图片"></a>优雅的在博客上插入图片</h2><p>我试过很多方法，使用以下两种方法最方便</p>
<h3 id="七牛-Mpic"><a href="#七牛-Mpic" class="headerlink" title="七牛+Mpic"></a><a href="https://www.qiniu.com/" target="_blank" rel="external">七牛</a>+<a href="http://mpic.lzhaofu.cn/" target="_blank" rel="external">Mpic</a></h3><p>使用七牛做图床，使用Mpic随时上传需要用在博客中的图片，支持截图上传，图片复制上传，非常方便。</p>
<h3 id="使用资源文件夹"><a href="#使用资源文件夹" class="headerlink" title="使用资源文件夹"></a>使用资源文件夹</h3><p>资源（Asset）代表 <code>source</code> 文件夹中除了文章以外的所有文件，例如图片、CSS、JS 文件等。比方说，如果你的Hexo项目中只有少量图片，那最简单的方法就是将它们放在 <code>source/images</code> 文件夹中。然后通过类似于<code>![](/images/image.jpg)</code> 的方法访问它们。</p>
<p>首先确认 <code>_config.yml</code> 中更改 <code>post_asset_folder:true</code> 。</p>
<p>回到<code>git shell</code>，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install https://github.com/CodeFalling/hexo-asset-image –save</div></pre></td></tr></table></figure></p>
<p>继续执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo clean</div><div class="line">hexo g</div><div class="line">hexo d</div></pre></td></tr></table></figure></p>
<p>重新创建一个博客名字，然后发现blog\source_posts下多了一个与博客名字相同的空文件夹</p>
<p>然后就可以把我们博客中要用到的图片存放在这个文件夹下，需要时直接引用即可，是不是特别方便？<br>提醒：</p>
<p>写一篇博文时尽量只使用一种markdown编辑器，如果同时使用两个编辑器，我感觉不同编辑器对markdown语法的编译还是有一些差别的，用这个编辑器写好的格式用另一个编辑器打开却乱了！</p>
<h2 id="预览和发表"><a href="#预览和发表" class="headerlink" title="预览和发表"></a>预览和发表</h2><p>使用Travis CI自动部署你的Hexo博客到Github,请参考手<a href="http://i.woblog.cn/2016/05/04/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E4%BD%BF%E7%94%A8Travis%20CI%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E4%BD%A0%E7%9A%84Hexo%E5%8D%9A%E5%AE%A2%E5%88%B0Github%E4%B8%8A/#more" target="_blank" rel="external">把手教你使用Travis CI自动部署你的Hexo博客到Github上</a></p>
<p>使用could9在线更新博客，这样的话即使更换了电脑，也能优雅的更新博客了。详细请参考：用c9.io实现在线更新博客</p>
<h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>你可以在<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">Themes·Hexo</a>上选择你喜欢的主题，我使用的Next主题</p>
<p>参考<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="external">Next官方文档</a>,内容十分详尽！<br>安装主题的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd your-hexo-site</div><div class="line">git clone https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure></p>
<p>安装完成后，打开_config.yml，修改主题为next<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">theme: next</div></pre></td></tr></table></figure></p>
<p>打开hexo\themes\next目录，编辑主题配置文件_config.yml：</p>
<h1 id="技能拓展"><a href="#技能拓展" class="headerlink" title="技能拓展"></a>技能拓展</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>做完以上的内容，你就拥有了一个还不错的博客了，一般用户就够用了。但是我相信你一定不会就此住手的，接下来还会自己折腾的。</p>
<blockquote>
<p>授之于鱼不如授之于渔<br>希望我们都能够理解其源码，制作出属于自己专属的个性化博客(•̀ᴗ•́)</p>
</blockquote>
<p>其实next主题的最新版（5.1）已经集成了大部分我们需要的插件，只需要在主题配置文件中将默认的false改为true即可，但是我们也仍然需要知道都有哪些新的功能，最有效的方法是直接去查看官网的api：<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next官网</a><br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162036325.png?imageslim" alt="mark"></p>
<p>我们需要改的文件其实也就那么几个，大部分是不需要更改，next都已经帮我们配置好了~<br>默认目录结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── .deploy</div><div class="line">├── public</div><div class="line">├── scaffolds</div><div class="line">├── scripts</div><div class="line">├── source</div><div class="line">|   ├── _drafts</div><div class="line">|   └── _posts</div><div class="line">├── themes</div><div class="line">├── _config.yml</div><div class="line">└── package.json</div></pre></td></tr></table></figure>
<ul>
<li>deploy：执行hexo deploy命令部署到GitHub上的内容目录</li>
<li>public：执行hexo generate命令，输出的静态网页内容目录</li>
<li>scaffolds：layout模板文件目录，其中的md文件可以添加编辑</li>
<li>scripts：扩展脚本目录，这里可以自定义一些javascript脚本</li>
<li>source：文章源码目录，该目录下的markdown和html文件均会被hexo处理。该页面对应repo的根目录，404文件、favicon.ico文件，CNAME文件等都应该放这里，该目录下可新建页面目录。</li>
<li>drafts：草稿文章</li>
<li>posts：发布文章</li>
<li>themes：主题文件目录</li>
<li>_config.yml：全局配置文件，大多数的设置都在这里</li>
<li>package.json：应用程序数据，指明hexo的版本等信息，类似于一般软件中的关于按钮</li>
</ul>
<p>我们最先修改的应该是在hexo根目录下的配置文件_config.yml文件，这里是配置整个站点的配置信息，在文章的最后贴出我的配置文件，有兴趣的朋友可以参考一下~<br>其次就是我们的主题配置文件<br>在对应的主题下的_config.yml 因为我使用的是next主题，所以目录的路径为C:\Hexo\themes\next_config.yml 这里配置的是使用主题的配置文件，这个配置文件的东西就有点多了，我们大部分的修改也是在这个文件下完成的。比如说使用集成的第三方插件，默认为false，我们需要将其改为true并且配置相应的app_key就可以使用该插件了~有木有很方便(^ ◕ᴥ◕ ^)<br>然后我们需要修改样式的话是需要设置css和甚至是修改模板，<br>页面展现的全部逻辑都在每个主题中控制，源代码在hexo\themes\你使用的主题\中，以next主题为例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">├── .github            #git信息</div><div class="line">├── languages          #多语言</div><div class="line">|   ├── default.yml    #默认语言</div><div class="line">|   └── zh-Hans.yml      #简体中文</div><div class="line">|   └── zh-tw.yml      #繁体中文</div><div class="line">├── layout             #布局，根目录下的*.ejs文件是对主页，分页，存档等的控制</div><div class="line">|   ├── _custom        #可以自己修改的模板，覆盖原有模板</div><div class="line">|   |   ├── _header.swig    #头部样式</div><div class="line">|   |   ├── _sidebar.swig   #侧边栏样式</div><div class="line">|   ├── _macro        #可以自己修改的模板，覆盖原有模板</div><div class="line">|   |   ├── post.swig    #文章模板</div><div class="line">|   |   ├── reward.swig    #打赏模板</div><div class="line">|   |   ├── sidebar.swig   #侧边栏模板</div><div class="line">|   ├── _partial       #局部的布局</div><div class="line">|   |   ├── head       #头部模板</div><div class="line">|   |   ├── search     #搜索模板</div><div class="line">|   |   ├── share      #分享模板</div><div class="line">|   ├── _script        #局部的布局</div><div class="line">|   ├── _third-party   #第三方模板</div><div class="line">|   ├── _layout.swig   #主页面模板</div><div class="line">|   ├── index.swig     #主页面模板</div><div class="line">|   ├── page           #页面模板</div><div class="line">|   └── tag.swig       #tag模板</div><div class="line">├── scripts            #script源码</div><div class="line">|   ├── tags           #tags的script源码</div><div class="line">|   ├── marge.js       #页面模板</div><div class="line">├── source             #源码</div><div class="line">|   ├── css            #css源码</div><div class="line">|   |   ├── _common    #*.styl基础css</div><div class="line">|   |   ├── _custom    #*.styl局部css</div><div class="line">|   |   └── _mixins    #mixins的css</div><div class="line">|   ├── fonts          #字体</div><div class="line">|   ├── images         #图片</div><div class="line">|   ├── uploads        #添加的文件</div><div class="line">|   └── js             #javascript源代码</div><div class="line">├── _config.yml        #主题配置文件</div><div class="line">└── README.md          #用GitHub的都知道</div></pre></td></tr></table></figure></p>
<h2 id="修改Next主题"><a href="#修改Next主题" class="headerlink" title="修改Next主题"></a>修改Next主题</h2><h3 id="主题颜色"><a href="#主题颜色" class="headerlink" title="主题颜色"></a>主题颜色</h3><p>打开<code>hexo/themes/next/source/css/_variables/base.styl</code>找到<code>Colors</code>代码段，如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// Colors</div><div class="line">// colors for use across theme.</div><div class="line">// --------------------------------------------------</div><div class="line">  $whitesmoke   = #f5f5f5</div><div class="line">  $gainsboro    = #eee  //这个是边栏头像外框的颜色，</div><div class="line">  $gray-lighter = #ddd  //文章中插入图片边框颜色</div><div class="line">  $grey-light   = #ccc  //文章之间分割线、下划线颜色</div><div class="line">  $grey         = #bbb  //页面选中圆点颜色</div><div class="line">  $grey-dark    = #999</div><div class="line">  $grey-dim     = #666 //侧边栏目录字体颜色</div><div class="line">  $black-light  = #555 //修改文章字体颜色</div><div class="line">  $black-dim    = #333</div><div class="line">  $black-deep   = #495a80  //修改主题的颜色，这里我已经改成老蓝色了。</div><div class="line">  $red          = #ff2a2a</div><div class="line">  $blue-bright  = #87daff</div><div class="line">  $blue         = #0684bd</div><div class="line">  $blue-deep    = #262a30</div><div class="line">  $orange       = #F39D01 //浏览文章时，目录选中的颜色</div></pre></td></tr></table></figure></p>
<p>其他的可以自行更改，看看效果，我这里只修改了<code>black-deep</code>和<code>orange</code>的颜色。</p>
<h3 id="主题背景"><a href="#主题背景" class="headerlink" title="主题背景"></a>主题背景</h3><p>打开<code>hexo/themes/next/source/css/_custom/custom.styl</code>新增如下代码：<br>背景颜色直接更改即可：<code>body { background: #F0F0F0; }</code><br>添加背景：<code>body { background: url（&#39;/images/background.jpg&#39;); }</code>(将背景图片放到<code>hexo/source/images</code>中即可。</p>
<h3 id="隐藏网页底部powered-By-Hexo-强力驱动"><a href="#隐藏网页底部powered-By-Hexo-强力驱动" class="headerlink" title="隐藏网页底部powered By Hexo / 强力驱动"></a>隐藏网页底部powered By Hexo / 强力驱动</h3><p>打开<code>hexo/themes/next/layout/_partials/footer.swig</code>,使用<code>&lt;!— —&gt;</code>隐藏之间的代码即可（隐藏后代码如下），或者直接删除。<br>这时，该行信息即被隐藏，但留有空白，如果你开启了网站流量统计，那么在统计和版权之间会有空行，很不美观，以下方法修改网站流量统计的位置。我这里使用的是不蒜子统计，其他统计类似。<br>打开<code>hexo/themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig</code>将两个<code>&lt;span&gt;</code>标签的<code>class</code>属性改为<code>powered-by</code>和<code>theme-info</code>，对这里使用了刚才删除hexo和主题信息标签的CSS属性，修改后代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;% if theme.busuanzicount.enable %&#125;</div><div class="line">	</div><div class="line"></div><div class="line">	  &#123;% if theme.busuanzicount.siteuv %&#125;</div><div class="line">		&#123;&#123; theme.busuanzicount.siteuvheader &#125;&#125;&#123;&#123; theme.busuanzicount.siteuvfooter &#125;&#125;</div><div class="line">	  &#123;% endif %&#125;</div><div class="line">  &#123;% if theme.busuanzicount.sitepv %&#125;</div><div class="line">		&#123;&#123; theme.busuanzicount.sitepvheader &#125;&#125;&#123;&#123; theme.busuanzicount.sitepvfooter &#125;&#125;</div><div class="line">	  &#123;% endif %&#125;</div><div class="line">&lt;/div&gt;</div><div class="line">&#123;% endif %&#125;</div></pre></td></tr></table></figure></p>
<p>修改后效果如下：</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/172803248.png?imageslim" alt="mark"></p>
<p>最后，图上有没有发现我的是一个五角星，默认为心型，在刚才footer.swig文件中找到如下代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"with-love"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-star"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>修改i标签的<code>class</code>属性<code>fa-love</code>，我这里改成了<code>fa-star</code>，其他图形未测过，有兴趣的朋友可以试试。</p>
<h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><p>绑定域名的思路如下：</p>
<ul>
<li>在万网购买自己喜欢的域名（<code>.com</code>的会贵一点，<code>.site</code>和<code>.xyz</code>的相对便宜一些，有的只需要几块钱一年就可以）</li>
<li>解析DNS</li>
<li>在hexo中添加CNAME文件</li>
</ul>
<h3 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h3><p>之前没有买域名的时候我想使用网易云跟帖，发现在注册网易云跟帖的时候使用原来的域名提示“url已被使用”，这是因为网易云跟帖不认可二级域名，所以要自己买域名。<br>我选择的是<a href="https://wanwang.aliyun.com/" target="_blank" rel="external">万网</a>，阿里下面的。我选择了一个.site的域名，~<br>按照官网的步骤一步一来就可以了~</p>
<h3 id="解析DNS"><a href="#解析DNS" class="headerlink" title="解析DNS"></a>解析DNS</h3><p>购买完域名之后我们需要解析DNS地址，在管理控制台中的左侧有域名选项，然后找到你的域名，点击后面的“解析”<br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162506981.png?imageslim" alt="mark"></p>
<p>点击添加解析，记录类型选A或CNAME，</p>
<blockquote>
<p>A记录的记录值就是ip地址，github(官方文档)提供了两个IP地址，192.30.252.153和192.30.252.154，这两个IP地址为github的服务器地址，两个都要填上，<br>解析记录设置两个www和@，线路就默认就行了，CNAME记录值填你的github博客网址。</p>
</blockquote>
<p>在hexo中添加CNAME文件</p>
<p>接下来在你的hexo文件夹下source文件夹下新建一个CANME文件,里面加上你刚刚购买的域名比如我的cherryblog.site<br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162657619.png?imageslim" alt="mark"></p>
<p>然后你就可以hexo clean,hexo g，hexo d 发布你的博客看看效果啦~<br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/162738362.png?imageslim" alt="mark"></p>
<h2 id="添加菜单页"><a href="#添加菜单页" class="headerlink" title="添加菜单页"></a>添加菜单页</h2><p>添加菜单页的思路（添加菜单页就是添加一个页面，有两种方式）：第一种是使用git命令hexo new page “photo” 就直接创建了d:\blog\source\photo\index.md文件，然后编辑index.md 文件就可以了~</p>
<p>在hexo中menu下的内容都是新的页面我们可以通过hexo new page “pagename” 创建，hexo默认的页面只有home,archives,tags 三个，之后我们写的博文就是文章，通过hexo new “name” 创建的name.md 文件在根目录的source_posts 下，在每一个文章的头部，我们可以配置其tags或者categories内容，相当于文章是页面的下一级</p>
<p>###在配置文件中添加menu索引路径<br>我们可以在主题配置的_config文件下找到相应的字段，字段前加# 表示被注释掉，我们也可以自己添加menu的内容，比如我又新增了两个menulife 和photo<br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/163145226.png?imageslim" alt="mark"><br>这里添加的字段其实是加上文件索引的路径，这里hexo设置的根路径是hexo/source 接下来我们在这个根路径下建立相应的文件夹就可以实现点击mune跳转到相应的页面上了<br><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/163200794.png?imageslim" alt="mark"></p>
<h3 id="在source文件添加menu文件夹"><a href="#在source文件添加menu文件夹" class="headerlink" title="在source文件添加menu文件夹"></a>在source文件添加menu文件夹</h3><p>我们需要在这个路径下自己建立对应的页面，比如说我新建了menulife 和photos，然后再source文件夹下面新建两个名字为life 和photo 的文件夹，里面添加一个index.md markdown文件，内容是类似这样的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">title: photo</div><div class="line">date: 2017-04-04 22:14:07</div><div class="line">type: &quot;photo&quot;</div><div class="line">comments: false</div><div class="line">---</div><div class="line">啦啦啦~</div></pre></td></tr></table></figure></p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164046607.png?imageslim" alt="mark"></p>
<h3 id="给menu添加icon"><a href="#给menu添加icon" class="headerlink" title="给menu添加icon"></a>给menu添加icon</h3><p>如果只是上面的步骤，那么你可能会创建出一个新的页面，但是显示的效果会是这样：</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164207648.png?imageslim" alt="mark"></p>
<p>怎么icon没有换？？？其实hexo中换icon是一个很简单的事情，因为hexo集成了FontAwsome 所以我们只需要在主题的配置文件中加入相应的icon名字即可</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164223707.png?imageslim" alt="mark"></p>
<p>查找FontAwsome icon</p>
<p>这时候你想要换一个自己喜欢的icon怎么办，这就需要自己动手，丰衣足食了，你需要自己到<a href="http://www.bootcss.com/p/font-awesome/#" target="_blank" rel="external">FontAwsome</a>官网，然后鼠标往下拉，在图标集中选择自己喜欢的icon，然后记住名字，保存在上面的menu_icon字段中就可以啦~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164304048.png?imageslim" alt="mark"></p>
<p>tips ：在字段中只需要填写icon-name后面跟的name即可，不需要加上前面的”icon-“</p>
<h3 id="在language添加zh-hans翻译字段"><a href="#在language添加zh-hans翻译字段" class="headerlink" title="在language添加zh-hans翻译字段"></a>在language添加zh-hans翻译字段</h3><p>上面的步骤完成之后你会发现，在你的博客首页显示的仍然是英文名，而我们想要有一个中文的名字，并且想要个性化定制我们的页面，我们可以在主题的language文件下的zh-hans（中文）语言包下增加相应的字段（做过翻译的童鞋应该都知道什么意思~）还可以修改其他的字段，这样就可以定制我们的博客了呢~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164342796.png?imageslim" alt="mark"></p>
<h3 id="在发表文章的时候添加对应的menu字段"><a href="#在发表文章的时候添加对应的menu字段" class="headerlink" title="在发表文章的时候添加对应的menu字段"></a>在发表文章的时候添加对应的menu字段</h3><p>在我们写文章的时候只要在头部信息添加相应的字段就在tags页面和categories中显示相应的分类，例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">title: Git使用中的报错情况</div><div class="line">date: 2017-03-11 23:54:11</div><div class="line">tags: [git,实战经验] </div><div class="line">categories: git</div><div class="line">---</div></pre></td></tr></table></figure></p>
<p>tags、categories都是支持数组的形式的，可以添加多个tags、categories。这样我们在tags、categories页面就可以看见相应的分类了。</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164448351.png?imageslim" alt="mark"></p>
<h2 id="添加头像"><a href="#添加头像" class="headerlink" title="添加头像"></a>添加头像</h2><p>要添加一个这个的头像要怎么操作呢，其实思路就是将你要上传的头像放在你的文件夹中，然后再配置文件中引用正确的路径即可，当然也可以上传绝对路径。在你的主题配置文件找到avatar字段，然后将你得图片路径写在后面，我是新建了一个uploads文件夹，将图片放在下面<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># Sidebar Avatar</div><div class="line"># in theme directory(source/images): /images/avatar.jpg</div><div class="line"># in site  directory(source/uploads): /uploads/avatar.jpg</div><div class="line">avatar: /uploads/avatar.png</div></pre></td></tr></table></figure></p>
<h2 id="设置网站logo"><a href="#设置网站logo" class="headerlink" title="设置网站logo"></a>设置网站logo</h2><p>跟设置头像其实是一个思路，都是在配置文件中引入正确的地址就可以了，不过网站的logo是对图片有要求的，我们需要在<a href="http://tool.lu/favicon/" target="_blank" rel="external">Favicon在线制作工具</a>中制作32*32的.ico图片，然后放在source/images下面。然后在主题配置文件下添加主题配置文件中添加：favicon: images/favicon.ico</p>
<h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><p>不得不说next还是很人性化的，你可以个性化定制你的网站，你所有的改动（css）需要放在主题文件的source/css/_costum/costum.styl文件中，会覆盖原来的css，所以只要你不想要你修改的样式，只需要删除这个文件夹就可以了，再也不用担心还原不回去了~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/164650186.png?imageslim" alt="mark"></p>
<h2 id="炫酷动态背景"><a href="#炫酷动态背景" class="headerlink" title="炫酷动态背景"></a>炫酷动态背景</h2><p>只有两步就可以了<br>添加修改代码<code>next/layout/_layout.swig在&lt;/body&gt;</code>之前加上<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;% <span class="keyword">if</span> theme.canvas_nest %&#125;</div><div class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div><div class="line">&#123;% endif %</div></pre></td></tr></table></figure></p>
<p>打开next/_config.yml，添加以下代码就可以了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># Canvas-nest</div><div class="line">canvas_nest: true</div></pre></td></tr></table></figure></p>
<h2 id="仿知乎动态背景"><a href="#仿知乎动态背景" class="headerlink" title="仿知乎动态背景"></a>仿知乎动态背景</h2><p>如果你认为这样效果不够好，只能添加原生的js来仿知乎的登录界面做背景，这就需要修改模板来实现了。首先我们要知道next文件的结构，这样我们想改什么就知道在什么位置了~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165045864.png?imageslim" alt="mark"></p>
<p>首先在主题文件的layout中的_layout.swigC:\Hexo\themes\next\layout_layout.swig中加入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div></pre></td><td class="code"><pre><div class="line">&lt;div class="bg_content"&gt;</div><div class="line">      &lt;canvas id="canvas"&gt;&lt;/canvas&gt;</div><div class="line"> &lt;/div&gt;</div><div class="line">'use strict';</div><div class="line">   var _createClass = function () &#123; function defineProperties(target, props) &#123; for (var i = 0; i &lt; props.length; i++) &#123; var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); &#125; &#125; return function (Constructor, protoProps, staticProps) &#123; if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; &#125;; &#125;();</div><div class="line">   function _possibleConstructorReturn(self, call) &#123; if (!self) &#123; throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); &#125; return call &amp;&amp; (typeof call === "object" || typeof call === "function") ? call : self; &#125;</div><div class="line">   function _inherits(subClass, superClass) &#123; if (typeof superClass !== "function" &amp;&amp; superClass !== null) &#123; throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); &#125; subClass.prototype = Object.create(superClass &amp;&amp; superClass.prototype, &#123; constructor: &#123; value: subClass, enumerable: false, writable: true, configurable: true &#125; &#125;); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; &#125;</div><div class="line">   function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError("Cannot call a class as a function"); &#125; &#125;</div><div class="line">   var Circle = function () &#123;</div><div class="line">      function Circle(x, y) &#123;</div><div class="line">           _classCallCheck(this, Circle);</div><div class="line">           this.x = x;</div><div class="line">           this.y = y;</div><div class="line">           this.r = Math.random() * 10;</div><div class="line">           this._mx = Math.random();</div><div class="line">           this._my = Math.random();</div><div class="line">       &#125;</div><div class="line">      _createClass(Circle, [&#123;</div><div class="line">           key: 'drawCircle',</div><div class="line">           value: function drawCircle(ctx) &#123;</div><div class="line">               ctx.beginPath();</div><div class="line">               //arc() 方法使用一个中心点和半径，为一个画布的当前子路径添加一条弧。</div><div class="line">               ctx.arc(this.x, this.y, this.r, 0, 360);</div><div class="line">               ctx.closePath();</div><div class="line">               ctx.fillStyle = 'rgba(204, 204, 204, 0.3)';</div><div class="line">               ctx.fill();</div><div class="line">           &#125;</div><div class="line">       &#125;, &#123;</div><div class="line">           key: 'drawLine',</div><div class="line">           value: function drawLine(ctx, _circle) &#123;</div><div class="line">               var dx = this.x - _circle.x;</div><div class="line">               var dy = this.y - _circle.y;</div><div class="line">               var d = Math.sqrt(dx * dx + dy * dy);</div><div class="line">               if (d &lt; 150) &#123;</div><div class="line">                   ctx.beginPath();</div><div class="line">                   ctx.moveTo(this.x, this.y); //起始点</div><div class="line">                   ctx.lineTo(_circle.x, _circle.y); //终点</div><div class="line">                   ctx.closePath();</div><div class="line">                   ctx.strokeStyle = 'rgba(204, 204, 204, 0.3)';</div><div class="line">                   ctx.stroke();</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">       &#125;, &#123;</div><div class="line">           key: 'move',</div><div class="line">           value: function move(w, h) &#123;</div><div class="line">               this._mx = this.x &lt; w &amp;&amp; this.x &gt; 0 ? this._mx : -this._mx;</div><div class="line">               this._my = this.y &lt; h &amp;&amp; this.y &gt; 0 ? this._my : -this._my;</div><div class="line">               this.x += this._mx / 2;</div><div class="line">               this.y += this._my / 2;</div><div class="line">           &#125;</div><div class="line">       &#125;]);</div><div class="line">       return Circle;</div><div class="line">   &#125;();</div><div class="line">   var currentCirle = function (_Circle) &#123;</div><div class="line">       _inherits(currentCirle, _Circle);</div><div class="line">       function currentCirle(x, y) &#123;</div><div class="line">           _classCallCheck(this, currentCirle);</div><div class="line">           return _possibleConstructorReturn(this, (currentCirle.__proto__ || Object.getPrototypeOf(currentCirle)).call(this, x, y));</div><div class="line">       &#125;</div><div class="line">       _createClass(currentCirle, [&#123;</div><div class="line">           key: 'drawCircle',</div><div class="line">           value: function drawCircle(ctx) &#123;</div><div class="line">               ctx.beginPath();</div><div class="line">               //this.r = (this.r &lt; 14 &amp;&amp; this.r &gt; 1) ? this.r + (Math.random() * 2 - 1) : 2;</div><div class="line">               this.r = 8;</div><div class="line">               ctx.arc(this.x, this.y, this.r, 0, 360);</div><div class="line">               ctx.closePath();</div><div class="line">               //ctx.fillStyle = 'rgba(0,0,0,' + (parseInt(Math.random() * 100) / 100) + ')'</div><div class="line">               ctx.fillStyle = 'rgba(255, 77, 54, 0.6)';</div><div class="line">               ctx.fill();</div><div class="line">           &#125;</div><div class="line">       &#125;]);</div><div class="line">       return currentCirle;</div><div class="line">   &#125;(Circle);</div><div class="line">   window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;</div><div class="line">   var canvas = document.getElementById('canvas');</div><div class="line">   var ctx = canvas.getContext('2d');</div><div class="line">   var w = canvas.width = canvas.offsetWidth;</div><div class="line">   var h = canvas.height = canvas.offsetHeight;</div><div class="line">   var circles = [];</div><div class="line">   var current_circle = new currentCirle(0, 0);</div><div class="line">   var draw = function draw() &#123;</div><div class="line">       ctx.clearRect(0, 0, w, h);</div><div class="line">       for (var i = 0; i &lt; circles.length; i++) &#123;</div><div class="line">           circles[i].move(w, h);</div><div class="line">           circles[i].drawCircle(ctx);</div><div class="line">           for (j = i + 1; j &lt; circles.length; j++) &#123;</div><div class="line">               circles[i].drawLine(ctx, circles[j]);</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       if (current_circle.x) &#123;</div><div class="line">           current_circle.drawCircle(ctx);</div><div class="line">           for (var k = 1; k &lt; circles.length; k++) &#123;</div><div class="line">               current_circle.drawLine(ctx, circles[k]);</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">       requestAnimationFrame(draw);</div><div class="line">   &#125;;</div><div class="line">   var init = function init(num) &#123;</div><div class="line">       for (var i = 0; i &lt; num; i++) &#123;</div><div class="line">           circles.push(new Circle(Math.random() * w, Math.random() * h));</div><div class="line">       &#125;</div><div class="line">       draw();</div><div class="line">   &#125;;</div><div class="line">   window.addEventListener('load', init(60));</div><div class="line">   window.onmousemove = function (e) &#123;</div><div class="line">       e = e || window.event;</div><div class="line">       current_circle.x = e.clientX;</div><div class="line">       current_circle.y = e.clientY;</div><div class="line">   &#125;;</div><div class="line">   window.onmouseout = function () &#123;</div><div class="line">       current_circle.x = null;</div><div class="line">       current_circle.y = null;</div></pre></td></tr></table></figure>
<p>在主题文件的C:\Hexo\themes\next\source\css_custom\custom.styl文件中加上css代码<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*设置背景*/</span></div><div class="line"><span class="selector-class">.bg_content</span>&#123;</div><div class="line">  <span class="attribute">position</span>: fixed;</div><div class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#canvas</span>&#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">height</span>:<span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*将头部背景变为透明*/</span></div><div class="line"><span class="selector-class">.header</span>&#123;</div><div class="line">  <span class="attribute">background</span>: transparent ;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="添加网易云音乐"><a href="#添加网易云音乐" class="headerlink" title="添加网易云音乐"></a>添加网易云音乐</h2><p>我们可以直接在网易云音乐中搜索我们想要插入的音乐，然后点击生成外链播放器</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165522767.png?imageslim" alt="mark"></p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165543167.png?imageslim" alt="mark"></p>
<p>我放在了layout/_macro/sidebar.swig 文件下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"music163player"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">280</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=38358214&amp;auto=0&amp;height=66"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后就可以在侧边栏看见我的播放器了~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165657431.png?imageslim" alt="mark"></p>
<h2 id="网易云跟帖"><a href="#网易云跟帖" class="headerlink" title="网易云跟帖"></a>网易云跟帖</h2><p>之前用的是多说，但是多说在2017年6月1日就关闭评论服务了= =，很忧伤，于是转到了网易云跟帖。由于最新版（5.1）版本的next已经集成了网易云跟帖，所以只需要在主题的设置文件中配置你的productKey就可以了。获取productKey也很简单，在官网<a href="https://manage.gentie.163.com/" target="_blank" rel="external">网易云跟帖</a>中注册，然后在获取代码&gt;通用代码中拿到productKey，之后在你的主题配置文件中的gentie_productKey字段后添加即可~</p>
<h2 id="添加Fork-me-on-GitHub"><a href="#添加Fork-me-on-GitHub" class="headerlink" title="添加Fork me on GitHub"></a>添加Fork me on GitHub</h2><p>去网址<a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="external">https://github.com/blog/273-github-ribbons</a> 挑选自己喜欢的样式，并复制代码，添加到<code>themes\next\layout_layout.swig</code>的<code>body</code>标签之内即可<br>记得把里面的url换成自己的!</p>
<h2 id="hexo-wordcount实现统计功能"><a href="#hexo-wordcount实现统计功能" class="headerlink" title="hexo-wordcount实现统计功能"></a>hexo-wordcount实现统计功能</h2><p>wordcount可以实现字数统计，阅读时常还有总字数的统计功能<br>只需要npm install hexo-wordcount –save 就可以安装wordcount插件，<br>主要功能<br>字数统计:WordCount<br>阅读时长预计:Min2Read<br>总字数统计: TotalCount<br>安装完插件之后在主题的配置文件中开启该功能就可以~</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/165948881.png?imageslim" alt="mark"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Post wordcount display settings</div><div class="line"># Dependencies: https://github.com/willin/hexo-wordcount</div><div class="line">post_wordcount:</div><div class="line">  item_text: true</div><div class="line">  wordcount: true</div><div class="line">  min2read: true</div></pre></td></tr></table></figure></p>
<h2 id="leancloud阅读次数统计"><a href="#leancloud阅读次数统计" class="headerlink" title="leancloud阅读次数统计"></a>leancloud阅读次数统计</h2><p>next也集成了leancloud，在<a href="https://leancloud.cn/" target="_blank" rel="external">leancloud官网</a>中注册账号等一步一步的操作就不说了哈~，我们主要是为了拿到app_key和app_id,然后在主题配置文件做一下配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Show number of visitors to each article.</div><div class="line"># You can visit https://leancloud.cn get AppID and AppKey.</div><div class="line">leancloud_visitors:</div><div class="line">  enable: true</div><div class="line">  app_id: yourapp_id</div><div class="line">  app_key: yourapp_key</div></pre></td></tr></table></figure></p>
<p>然后再leancloud的控制台中的存储添加一个counter的class就可以检测到我们的浏览量了，同时在你文章的副标题也可以看到有阅读次数的显示</p>
<p><img src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/170118487.png?imageslim" alt="mark"></p>
<h2 id="图床"><a href="#图床" class="headerlink" title="图床"></a>图床</h2><p>虑到博客的速度，同时也为了便于博客的迁移，图床是必须的。我墙裂推荐七牛，访问速度极快，支持日志、防盗链和水印。</p>
<p>免费用户有每月10GB流量+总空间10GB+PUT/DELETE 10万次请求+GET 100万次请求，这对个人博客来说足够，有一点要说明的是，七牛没有目录的概念，但是文件名可以包含/，比如2013/11/27/reading/photos-0.jpg，参考这里关于<a href="https://support.qiniu.com/hc/" target="_blank" rel="external">key-value存储系统</a>。</p>
<p>七牛除了作为图床还可以作为其他静态文件存储空间，比如我的个人站点首页有个字库文件和JS文件下载较慢，有时间会把它弄到七牛上去，以提高首页打开速度。请看这篇<a href="https://linux.cn/article-2311-1.html" target="_blank" rel="external">Linux中国采用七牛云存储支撑图片访问</a>。</p>
<p>如果非要说不足的话，就是文件管理界面不是很友好，不支持CNAME到分配的永久链接，也不能绑定未备案的自有域名，必须备案才可以。</p>
<p>如果你对七牛web版的文件管理界面不满意，可以用官方的<a href="http://docs.qiniu.com/tools/v6/index.html" target="_blank" rel="external">七牛云存储工具</a>。</p>
<p>您还可以使用如下图床服务 FarBox，Dropbox，又拍云</p>
<h2 id="主题优化"><a href="#主题优化" class="headerlink" title="主题优化"></a>主题优化</h2><p>Next主题很美观，个人也非常喜欢，但是一点令我们烦恼的就是主题加载的特别缓慢，那怎么优化呢？请参考一下两篇博文，作者已经总结的非常详细了，有需要的可以拜读一下，受益匪浅！</p>
<p><a href="http://www.gfwsb.com/2016/improveNexTspeed/" target="_blank" rel="external">提升Hexo的NexT主题加载速度</a></p>
<p><a href="http://www.gfwsb.com/2016/improveNexTspeed/" target="_blank" rel="external">使用gulp精简hexo博客代码</a></p>
<h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><p>我没有添加分享，觉得这个不是很必要，导致页面看起来啰嗦。以加网为例介绍如何添加：</p>
<ul>
<li>在hexo\themes\modernist\layout_partial\post下新建jiathis.ejs文件。<br>注册加网获得你的分享代码，写入jiathis.ejs。</li>
<li>在hexo\themes\modernist\layout_partial\article.ejs中，添加&lt;%-partial(‘post/jiathis’)%&gt;。<br>-分享服务还可以使用如下企业提供的技术<a href="http://www.jiathis.com/" target="_blank" rel="external">加网</a>，<a href="http://www.bshare.cn/" target="_blank" rel="external">bShare</a>，<a href="http://share.baidu.com/" target="_blank" rel="external">百度分享</a>。</li>
</ul>
<h2 id="自定义挂件"><a href="#自定义挂件" class="headerlink" title="自定义挂件"></a>自定义挂件</h2><p>除了默认已提供的挂件外，你还可以自定义自己的小挂件，在hexo\themes\modernist\layout_widget\下，新建自己的ejs文件，如myWidget.ejs，然后在配置文件hexo\themes\modernist_config.yml中配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">widgets:</div><div class="line">  - myWidget</div></pre></td></tr></table></figure></p>
<p>用上述方法可以添加新浪微博小挂件。</p>
<ul>
<li>生成自己的微博组件。</li>
<li>添加hexo\themes\modernist\layout_widget\weibo.ejs文件。</li>
<li>配置hexo\themes\modernist_config.yml。</li>
</ul>
<h2 id="换机器"><a href="#换机器" class="headerlink" title="换机器"></a>换机器</h2><p>你要保留好自己的博客源码。换机器写博客，就只能使用各种网盘的同步功能，或者你把你的站点源文件提交到某代码托管服务器。另外，貌似这篇很牛逼，Hexo 服务器端布署及 Dropbox 同步。</p>
<p>我的办法是这样的，先在一个目录下做好Node+Git+Hexo的绿色环境，写个hexos.bat可以一键启动hexo工作台，把整个目录用Dropbox同步，这样随便在办公室或家的任何笔记本台式机都可以写博客，也不用处理什么文件拷贝备份的事情，非常爽。</p>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><ul>
<li><a href="http://cherryblog.site/Use-Gitpagehexo-to-develop-their-own-blog.html" target="_blank" rel="external">利用Gitpage+hexo开发自己的博客</a></li>
<li><a href="http://zhouhuix.cn/2016/11/24/%E4%BF%AE%E6%94%B9Hexo%E7%9A%84Next%E4%B8%BB%E9%A2%98" target="_blank" rel="external">修改Hexo的Next主题</a></li>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">hexo你的博客</a></li>
<li><a href="http://www.jianshu.com/p/e99ed60390a8" target="_blank" rel="external">20分钟教你使用hexo搭建github博客</a></li>
<li><a href="http://blog.netpi.me/%E5%AE%9E%E7%94%A8/hexo/" target="_blank" rel="external">hexo + github + 多说 来搭建免费博客</a></li>
<li><a href="http://www.jerryfu.net/post/search-engine-for-hexo-with-swiftype-v2.html" target="_blank" rel="external">利用swiftype为hexo添加站内搜索</a></li>
<li><a href="http://www.imys.net/20150513/wordpress-to-hexo.html#%E6%97%A0%E6%B3%95%E5%BC%80%E5%90%AFRSS%E5%92%8Csitemap" target="_blank" rel="external">博客搬迁记 - 从WordPress到Hexo</a></li>
<li><a href="http://www.tuicool.com/articles/umEBVfI" target="_blank" rel="external">在hexo中无痛使用本地图片</a></li>
<li><a href="http://i.woblog.cn/2016/05/04/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E4%BD%BF%E7%94%A8Travis%20CI%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E4%BD%A0%E7%9A%84Hexo%E5%8D%9A%E5%AE%A2%E5%88%B0Github%E4%B8%8A/#more" target="_blank" rel="external">手把手教你使用Travis CI自动部署你的Hexo博客到Github上</a></li>
<li><a href="http://www.gfwsb.com/2016/use-sitemap-for-hexo/" target="_blank" rel="external">为Hexo博客生成sitemap</a></li>
<li><a href="http://www.5941740.cn/2016/02/19/%E4%BD%BF%E7%94%A8gulp%E7%B2%BE%E7%AE%80hexo%E5%8D%9A%E5%AE%A2%E4%BB%A3%E7%A0%81/" target="_blank" rel="external">使用gulp精简hexo博客代码</a></li>
<li><a href="http://chitanda.me/2015/11/03/multiple-git-pages-in-one-github-account/" target="_blank" rel="external">单个GitHub帐号下添加多个GitHub Pages的相关问题</a></li>
<li><a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">hexo你的博客</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>我们一起来让这个世界有趣一点！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block;width=180px;">
          <img id="wechat_qr" src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/184327856.JPG" alt="Hanyuntao WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block;width=180px;">
          <img id="alipay_qr" src="http://oq6k3jdcg.bkt.clouddn.com/blog/20170520/182954856.JPG" alt="Hanyuntao Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/hexo/" rel="tag"># hexo</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/18/灵活方便的布局方式——弹性布局/" rel="next" title="灵活方便的布局方式——弹性布局">
                <i class="fa fa-chevron-left"></i> 灵活方便的布局方式——弹性布局
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/22/Javscript面向对象编程-理解对象/" rel="prev" title="Javscript面向对象编程--理解对象">
                Javscript面向对象编程--理解对象 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oq6k3jdcg.bkt.clouddn.com/avatar.jpg"
               alt="Hanyuntao" />
          <p class="site-author-name" itemprop="name">Hanyuntao</p>
           
              <p class="site-description motion-element" itemprop="description">stay hungry stay foolish</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/hanyuntao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/cc07c1b21b4b" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  简书
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gitpage-hexo"><span class="nav-number">1.</span> <span class="nav-text">Gitpage+hexo</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#环境准备"><span class="nav-number"></span> <span class="nav-text">环境准备</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Node"><span class="nav-number">1.</span> <span class="nav-text">安装Node</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Git"><span class="nav-number">2.</span> <span class="nav-text">安装Git</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装Hexo"><span class="nav-number">3.</span> <span class="nav-text">安装Hexo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#github"><span class="nav-number">4.</span> <span class="nav-text">github</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#建站"><span class="nav-number"></span> <span class="nav-text">建站</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#本地部署"><span class="nav-number">1.</span> <span class="nav-text">本地部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#部署博客到服务器"><span class="nav-number">2.</span> <span class="nav-text">部署博客到服务器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#发表博文"><span class="nav-number"></span> <span class="nav-text">发表博文</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#新建博文"><span class="nav-number">1.</span> <span class="nav-text">新建博文</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文章模板"><span class="nav-number">1.1.</span> <span class="nav-text">文章模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图片的fancybox效果"><span class="nav-number">1.2.</span> <span class="nav-text">图片的fancybox效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#description"><span class="nav-number">1.3.</span> <span class="nav-text">description</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文章摘要"><span class="nav-number">1.4.</span> <span class="nav-text">文章摘要</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#优雅的在博客上插入图片"><span class="nav-number">2.</span> <span class="nav-text">优雅的在博客上插入图片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#七牛-Mpic"><span class="nav-number">2.1.</span> <span class="nav-text">七牛+Mpic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用资源文件夹"><span class="nav-number">2.2.</span> <span class="nav-text">使用资源文件夹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预览和发表"><span class="nav-number">3.</span> <span class="nav-text">预览和发表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装主题"><span class="nav-number">4.</span> <span class="nav-text">安装主题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#技能拓展"><span class="nav-number"></span> <span class="nav-text">技能拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改Next主题"><span class="nav-number">2.</span> <span class="nav-text">修改Next主题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#主题颜色"><span class="nav-number">2.1.</span> <span class="nav-text">主题颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主题背景"><span class="nav-number">2.2.</span> <span class="nav-text">主题背景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐藏网页底部powered-By-Hexo-强力驱动"><span class="nav-number">2.3.</span> <span class="nav-text">隐藏网页底部powered By Hexo / 强力驱动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绑定域名"><span class="nav-number">3.</span> <span class="nav-text">绑定域名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#购买域名"><span class="nav-number">3.1.</span> <span class="nav-text">购买域名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解析DNS"><span class="nav-number">3.2.</span> <span class="nav-text">解析DNS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加菜单页"><span class="nav-number">4.</span> <span class="nav-text">添加菜单页</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在source文件添加menu文件夹"><span class="nav-number">4.1.</span> <span class="nav-text">在source文件添加menu文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#给menu添加icon"><span class="nav-number">4.2.</span> <span class="nav-text">给menu添加icon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在language添加zh-hans翻译字段"><span class="nav-number">4.3.</span> <span class="nav-text">在language添加zh-hans翻译字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在发表文章的时候添加对应的menu字段"><span class="nav-number">4.4.</span> <span class="nav-text">在发表文章的时候添加对应的menu字段</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加头像"><span class="nav-number">5.</span> <span class="nav-text">添加头像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置网站logo"><span class="nav-number">6.</span> <span class="nav-text">设置网站logo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义样式"><span class="nav-number">7.</span> <span class="nav-text">自定义样式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#炫酷动态背景"><span class="nav-number">8.</span> <span class="nav-text">炫酷动态背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#仿知乎动态背景"><span class="nav-number">9.</span> <span class="nav-text">仿知乎动态背景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加网易云音乐"><span class="nav-number">10.</span> <span class="nav-text">添加网易云音乐</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网易云跟帖"><span class="nav-number">11.</span> <span class="nav-text">网易云跟帖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#添加Fork-me-on-GitHub"><span class="nav-number">12.</span> <span class="nav-text">添加Fork me on GitHub</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hexo-wordcount实现统计功能"><span class="nav-number">13.</span> <span class="nav-text">hexo-wordcount实现统计功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#leancloud阅读次数统计"><span class="nav-number">14.</span> <span class="nav-text">leancloud阅读次数统计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#图床"><span class="nav-number">15.</span> <span class="nav-text">图床</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主题优化"><span class="nav-number">16.</span> <span class="nav-text">主题优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分享"><span class="nav-number">17.</span> <span class="nav-text">分享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义挂件"><span class="nav-number">18.</span> <span class="nav-text">自定义挂件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#换机器"><span class="nav-number">19.</span> <span class="nav-text">换机器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考文献"><span class="nav-number"></span> <span class="nav-text">参考文献</span></a></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
    </div>

  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hanyuntao</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "908bb7e1666842a2bcd2593c69355754",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("UWGxME7EEmTFsG3vOasDw71p-gzGzoHsz", "TEKAlVh7WQw2mebF7C6X3tpJ");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

</body>
</html>
